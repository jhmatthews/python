\hypertarget{signal_8c}{}\section{/\+Users/mhewitt/python/source/signal.c File Reference}
\label{signal_8c}\index{/\+Users/mhewitt/python/source/signal.\+c@{/\+Users/mhewitt/python/source/signal.\+c}}


Routines indicating how many ionization or spectal generation cycles have been completed in in a file named root.\+sig where root is the rootname of the .pf file and which stop the program if one has set a maximum execution time and this has been exceeded.  


{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$strings.\+h$>$}\newline
{\ttfamily \#include $<$stdarg.\+h$>$}\newline
{\ttfamily \#include $<$math.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include \char`\"{}log.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}atomic.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}python.\+h\char`\"{}}\newline
Include dependency graph for signal.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{signal_8c__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{signal_8c_ab1f63fcb955cb5c77dcb2d35b5da2cd4}{xsignal} (char $\ast$root, char $\ast$format,...)
\begin{DoxyCompactList}\small\item\em xsignal generates a single line message to a file names root.\+sig \end{DoxyCompactList}\item 
int \hyperlink{signal_8c_adb0062a13c369fa8c13a5a02c3ffec86}{xsignal\+\_\+rm} (char $\ast$root)
\begin{DoxyCompactList}\small\item\em Remove the old signal file so that one can begin again. \end{DoxyCompactList}\item 
int \hyperlink{signal_8c_a53d75807008c96f7053e25e029ed8a95}{set\+\_\+max\+\_\+time} (char $\ast$root, double \hyperlink{import__spherical_8c_afc1637b8a38578a1c95ed9f689476775}{t})
\begin{DoxyCompactList}\small\item\em Set the maximum time the program should run. \end{DoxyCompactList}\item 
int \hyperlink{signal_8c_aa067770b0286b11ebb3282166d941c85}{check\+\_\+time} (char $\ast$root)
\begin{DoxyCompactList}\small\item\em check whether the elapsed time is greater than the max\+\_\+time and terminate the program if that is the case. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
double \hyperlink{signal_8c_af77a0354db3027f2b7ff69d53fca7530}{max\+\_\+time} = -\/1.\+0
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Routines indicating how many ionization or spectal generation cycles have been completed in in a file named root.\+sig where root is the rootname of the .pf file and which stop the program if one has set a maximum execution time and this has been exceeded. 

\begin{DoxyAuthor}{Author}
ksl 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
March, 2018
\end{DoxyDate}
The purpose of these routines are to give a very high level view of where the program is at any time, and in particular whether the program was complete at the time the program exited.

The were written for running models on systems whre there are time limits on how long a program can run, such as beowulf clusters.

They permit you to stop (checkpoint) the program after a certain time, and then using scripts to easily determine whether the program ran to completion and if not to restart the program to finish a run 

\subsection{Function Documentation}
\mbox{\Hypertarget{signal_8c_aa067770b0286b11ebb3282166d941c85}\label{signal_8c_aa067770b0286b11ebb3282166d941c85}} 
\index{signal.\+c@{signal.\+c}!check\+\_\+time@{check\+\_\+time}}
\index{check\+\_\+time@{check\+\_\+time}!signal.\+c@{signal.\+c}}
\subsubsection{\texorpdfstring{check\+\_\+time()}{check\_time()}}
{\footnotesize\ttfamily int check\+\_\+time (\begin{DoxyParamCaption}\item[{char $\ast$}]{root }\end{DoxyParamCaption})}



check whether the elapsed time is greater than the max\+\_\+time and terminate the program if that is the case. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em char} & $\ast$ root root name of the files where information is logged \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns 0, unless the time has exeeded the maximum time in which case the program writes a comment to .sig file and exits
\end{DoxyReturn}
If the current time is greater than the allowed time. Then the program is stopped, and a signal is sent to the .sig file that the program can be restarted

If the maximum time has not been set then this routine is a N\+OP

\paragraph*{Notes}

Generally speaking one should send a message to xsignal before invoking check\+\_\+time to record the status of the signal file 

Definition at line 261 of file signal.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{signal_8c_aa067770b0286b11ebb3282166d941c85_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=252pt]{signal_8c_aa067770b0286b11ebb3282166d941c85_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{signal_8c_a53d75807008c96f7053e25e029ed8a95}\label{signal_8c_a53d75807008c96f7053e25e029ed8a95}} 
\index{signal.\+c@{signal.\+c}!set\+\_\+max\+\_\+time@{set\+\_\+max\+\_\+time}}
\index{set\+\_\+max\+\_\+time@{set\+\_\+max\+\_\+time}!signal.\+c@{signal.\+c}}
\subsubsection{\texorpdfstring{set\+\_\+max\+\_\+time()}{set\_max\_time()}}
{\footnotesize\ttfamily int set\+\_\+max\+\_\+time (\begin{DoxyParamCaption}\item[{char $\ast$}]{root,  }\item[{double}]{t }\end{DoxyParamCaption})}



Set the maximum time the program should run. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in,out}  & {\em char} & $\ast$ root Root name of the .sig file where the max time is recorded \\
\hline
\mbox{\tt in,out}  & {\em double} & t The maximum time one wants to proposal to run \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Always returns 0
\end{DoxyReturn}
The routine simple sets the max\+\_\+time (an external variable) and writs information about this to .sig and log files.

\paragraph*{Notes}

Definition at line 223 of file signal.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{signal_8c_a53d75807008c96f7053e25e029ed8a95_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=267pt]{signal_8c_a53d75807008c96f7053e25e029ed8a95_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{signal_8c_ab1f63fcb955cb5c77dcb2d35b5da2cd4}\label{signal_8c_ab1f63fcb955cb5c77dcb2d35b5da2cd4}} 
\index{signal.\+c@{signal.\+c}!xsignal@{xsignal}}
\index{xsignal@{xsignal}!signal.\+c@{signal.\+c}}
\subsubsection{\texorpdfstring{xsignal()}{xsignal()}}
{\footnotesize\ttfamily int xsignal (\begin{DoxyParamCaption}\item[{char $\ast$}]{root,  }\item[{char $\ast$}]{format,  }\item[{}]{... }\end{DoxyParamCaption})}



xsignal generates a single line message to a file names root.\+sig 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em char} & $\ast$ root root name of the file to wirte to \\
\hline
\mbox{\tt in}  & {\em char} & $\ast$ format A format string \\
\hline
\mbox{\tt in}  & {\em ...} & The remaining inputs for the fprintf statement \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Always returns 0
\end{DoxyReturn}
If one cannot write to the .sig file, Python will exit

\paragraph*{Notes}

In principle almost anything can be written to the .sig file, as this uses vfprintf to write to the file. In pracitce all of the messages have the format

Mon Nov 10 09\+:05\+:34 2008 10.\+0 message

where the message is determined by the format and the extra variables that are passed to the program.

The messages are all written from the rank 0 thread. 

Definition at line 78 of file signal.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{signal_8c_ab1f63fcb955cb5c77dcb2d35b5da2cd4_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=248pt]{signal_8c_ab1f63fcb955cb5c77dcb2d35b5da2cd4_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{signal_8c_adb0062a13c369fa8c13a5a02c3ffec86}\label{signal_8c_adb0062a13c369fa8c13a5a02c3ffec86}} 
\index{signal.\+c@{signal.\+c}!xsignal\+\_\+rm@{xsignal\+\_\+rm}}
\index{xsignal\+\_\+rm@{xsignal\+\_\+rm}!signal.\+c@{signal.\+c}}
\subsubsection{\texorpdfstring{xsignal\+\_\+rm()}{xsignal\_rm()}}
{\footnotesize\ttfamily int xsignal\+\_\+rm (\begin{DoxyParamCaption}\item[{char $\ast$}]{root }\end{DoxyParamCaption})}



Remove the old signal file so that one can begin again. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in,out}  & {\em char} & $\ast$ root Root name of the .sig file \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Always returns 0
\end{DoxyReturn}
The routine checks whether a .sig file exists, and if so removes it

\paragraph*{Notes}

Thread 0 is responsible for executing the removal. 

Definition at line 164 of file signal.\+c.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=261pt]{signal_8c_adb0062a13c369fa8c13a5a02c3ffec86_icgraph}
\end{center}
\end{figure}


\subsection{Variable Documentation}
\mbox{\Hypertarget{signal_8c_af77a0354db3027f2b7ff69d53fca7530}\label{signal_8c_af77a0354db3027f2b7ff69d53fca7530}} 
\index{signal.\+c@{signal.\+c}!max\+\_\+time@{max\+\_\+time}}
\index{max\+\_\+time@{max\+\_\+time}!signal.\+c@{signal.\+c}}
\subsubsection{\texorpdfstring{max\+\_\+time}{max\_time}}
{\footnotesize\ttfamily double max\+\_\+time = -\/1.\+0}



Definition at line 203 of file signal.\+c.

