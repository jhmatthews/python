\hypertarget{para__update_8c}{}\section{/\+Users/mhewitt/python/source/para\+\_\+update.c File Reference}
\label{para__update_8c}\index{/\+Users/mhewitt/python/source/para\+\_\+update.\+c@{/\+Users/mhewitt/python/source/para\+\_\+update.\+c}}


routines for communicating MC estimators and spectra between M\+PI threads.  


{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$math.\+h$>$}\newline
{\ttfamily \#include \char`\"{}atomic.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}python.\+h\char`\"{}}\newline
Include dependency graph for para\+\_\+update.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{para__update_8c__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{para__update_8c_a8524049a103b57e15825aa63f08e667e}{communicate\+\_\+estimators\+\_\+para} ()
\begin{DoxyCompactList}\small\item\em communicates the MC estimators between tasks \end{DoxyCompactList}\item 
int \hyperlink{para__update_8c_ab7869aa7674de4defa57e532b23d3a2d}{gather\+\_\+spectra\+\_\+para} (int nspec\+\_\+helper, int nspecs)
\begin{DoxyCompactList}\small\item\em sum up the synthetic spectra between threads. \end{DoxyCompactList}\item 
int \hyperlink{para__update_8c_a3f23b6db628c0b7e87354f1007ac3a77}{communicate\+\_\+matom\+\_\+estimators\+\_\+para} ()
\end{DoxyCompactItemize}


\subsection{Detailed Description}
routines for communicating MC estimators and spectra between M\+PI threads. 

\begin{DoxyAuthor}{Author}
ksl, jm 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
January, 2018 
\end{DoxyDate}


\subsection{Function Documentation}
\mbox{\Hypertarget{para__update_8c_a8524049a103b57e15825aa63f08e667e}\label{para__update_8c_a8524049a103b57e15825aa63f08e667e}} 
\index{para\+\_\+update.\+c@{para\+\_\+update.\+c}!communicate\+\_\+estimators\+\_\+para@{communicate\+\_\+estimators\+\_\+para}}
\index{communicate\+\_\+estimators\+\_\+para@{communicate\+\_\+estimators\+\_\+para}!para\+\_\+update.\+c@{para\+\_\+update.\+c}}
\subsubsection{\texorpdfstring{communicate\+\_\+estimators\+\_\+para()}{communicate\_estimators\_para()}}
{\footnotesize\ttfamily int communicate\+\_\+estimators\+\_\+para (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



communicates the MC estimators between tasks 

communicates the MC estimators between tasks relating to spectral models, heating and cooling and cell diagnostics like IP. In the case of some variables, the quantities are maxima and minima so the flag M\+P\+I\+\_\+\+M\+AX or M\+P\+I\+\_\+\+M\+IN is used in M\+P\+I\+\_\+\+Reduce. For summed quantities like heating we use M\+P\+I\+\_\+\+S\+UM.

This routine should only do anything if the M\+P\+I\+\_\+\+ON flag was present in compilation. It communicates all the information required for the spectral model ionization scheme, and also heating and cooling quantities in cells. 

Definition at line 35 of file para\+\_\+update.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=292pt]{para__update_8c_a8524049a103b57e15825aa63f08e667e_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=317pt]{para__update_8c_a8524049a103b57e15825aa63f08e667e_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{para__update_8c_a3f23b6db628c0b7e87354f1007ac3a77}\label{para__update_8c_a3f23b6db628c0b7e87354f1007ac3a77}} 
\index{para\+\_\+update.\+c@{para\+\_\+update.\+c}!communicate\+\_\+matom\+\_\+estimators\+\_\+para@{communicate\+\_\+matom\+\_\+estimators\+\_\+para}}
\index{communicate\+\_\+matom\+\_\+estimators\+\_\+para@{communicate\+\_\+matom\+\_\+estimators\+\_\+para}!para\+\_\+update.\+c@{para\+\_\+update.\+c}}
\subsubsection{\texorpdfstring{communicate\+\_\+matom\+\_\+estimators\+\_\+para()}{communicate\_matom\_estimators\_para()}}
{\footnotesize\ttfamily int communicate\+\_\+matom\+\_\+estimators\+\_\+para (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}

averages the macro-\/atom estimators between tasks using M\+P\+I\+\_\+\+Reduce. It should only be called if the M\+P\+I\+\_\+\+ON flag was present in compilation, and returns 0 immediately if no macro atom levels. This should probably be improved by working out exactly what is needed in simple-\/ion only mode. 

Definition at line 349 of file para\+\_\+update.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{para__update_8c_a3f23b6db628c0b7e87354f1007ac3a77_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=344pt]{para__update_8c_a3f23b6db628c0b7e87354f1007ac3a77_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{para__update_8c_ab7869aa7674de4defa57e532b23d3a2d}\label{para__update_8c_ab7869aa7674de4defa57e532b23d3a2d}} 
\index{para\+\_\+update.\+c@{para\+\_\+update.\+c}!gather\+\_\+spectra\+\_\+para@{gather\+\_\+spectra\+\_\+para}}
\index{gather\+\_\+spectra\+\_\+para@{gather\+\_\+spectra\+\_\+para}!para\+\_\+update.\+c@{para\+\_\+update.\+c}}
\subsubsection{\texorpdfstring{gather\+\_\+spectra\+\_\+para()}{gather\_spectra\_para()}}
{\footnotesize\ttfamily int gather\+\_\+spectra\+\_\+para (\begin{DoxyParamCaption}\item[{int}]{nspec\+\_\+helper,  }\item[{int}]{nspecs }\end{DoxyParamCaption})}



sum up the synthetic spectra between threads. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em int} & nspecs number of spectra to compute \\
\hline
\mbox{\tt in}  & {\em int} & nspec\+\_\+helper the length of the big arrays to help with the M\+PI reductions of the spectra equal to 2 $\ast$ number of spectra (N\+S\+P\+EC) $\ast$ number of wavelengths.\\
\hline
\end{DoxyParams}
sum up the synthetic spectra between threads. Does an M\+P\+I\+\_\+\+Reduce then an M\+P\+I\+\_\+\+Bcast for each element of the linear and log spectra arrays (xxspec) 

Definition at line 286 of file para\+\_\+update.\+c.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=284pt]{para__update_8c_ab7869aa7674de4defa57e532b23d3a2d_icgraph}
\end{center}
\end{figure}
