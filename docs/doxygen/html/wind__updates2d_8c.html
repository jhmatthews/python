<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Python MCRT: /Users/mhewitt/python/source/wind_updates2d.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Python MCRT
   </div>
   <div id="projectbrief">A Monte Carlo radiative transfer and ionization code</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('wind__updates2d_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">wind_updates2d.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This file contains the main routines for updating and then reinitializing the wind after an ionization cycle.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;math.h&gt;</code><br />
<code>#include &quot;<a class="el" href="atomic_8h_source.html">atomic.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="python_8h_source.html">python.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for wind_updates2d.c:</div>
<div class="dyncontent">
<div class="center"><img src="wind__updates2d_8c__incl.png" border="0" usemap="#_2_users_2mhewitt_2python_2source_2wind__updates2d_8c" alt=""/></div>
<map name="_2_users_2mhewitt_2python_2source_2wind__updates2d_8c" id="_2_users_2mhewitt_2python_2source_2wind__updates2d_8c">
<area shape="rect" id="node6" href="atomic_8h.html" title="atomic.h" alt="" coords="315,95,375,121"/>
<area shape="rect" id="node7" href="python_8h.html" title="python.h" alt="" coords="399,95,459,121"/>
<area shape="rect" id="node8" href="log_8h.html" title="log.h" alt="" coords="283,169,327,196"/>
<area shape="rect" id="node9" href="version_8h.html" title="version.h" alt="" coords="351,169,413,196"/>
<area shape="rect" id="node10" href="templates_8h.html" title="templates.h" alt="" coords="437,169,511,196"/>
<area shape="rect" id="node11" href="recipes_8h.html" title="recipes.h" alt="" coords="535,169,597,196"/>
</map>
</div>
</div>
<p><a href="wind__updates2d_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a764eaf37b6117ac7a17b1c049c1d2d16"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wind__updates2d_8c.html#a764eaf37b6117ac7a17b1c049c1d2d16">LINELEN</a>&#160;&#160;&#160;256</td></tr>
<tr class="separator:a764eaf37b6117ac7a17b1c049c1d2d16"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a33b6675f8fdb790ed332fd9f5df994d3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wind__updates2d_8c.html#a33b6675f8fdb790ed332fd9f5df994d3">wind_update</a> (w)</td></tr>
<tr class="memdesc:a33b6675f8fdb790ed332fd9f5df994d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">updates the parameters in the wind that are affected by radiation, including ion densities.  <a href="#a33b6675f8fdb790ed332fd9f5df994d3">More...</a><br /></td></tr>
<tr class="separator:a33b6675f8fdb790ed332fd9f5df994d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1f75e088856c1c47527ce62bea5c913"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wind__updates2d_8c.html#aa1f75e088856c1c47527ce62bea5c913">wind_rad_init</a> ()</td></tr>
<tr class="memdesc:aa1f75e088856c1c47527ce62bea5c913"><td class="mdescLeft">&#160;</td><td class="mdescRight">zeros those portions of the wind which contain the radiation properties of the wind, i.e those portions which should be set to zeroed when the structure of the wind has been changed or when you simply want to start off a calculation in a known state  <a href="#aa1f75e088856c1c47527ce62bea5c913">More...</a><br /></td></tr>
<tr class="separator:aa1f75e088856c1c47527ce62bea5c913"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a3c086b2e71aab221283031cdd9ae00ba"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wind__updates2d_8c.html#a3c086b2e71aab221283031cdd9ae00ba">num_updates</a> = 0</td></tr>
<tr class="separator:a3c086b2e71aab221283031cdd9ae00ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file contains the main routines for updating and then reinitializing the wind after an ionization cycle. </p>
<dl class="section author"><dt>Author</dt><dd>ksl </dd></dl>
<dl class="section date"><dt>Date</dt><dd>May, 2018</dd></dl>
<p>The routines in this file are generic. There is no dependence on a particlar wind model or any coordinate system dependences. </p>

<p class="definition">Definition in file <a class="el" href="wind__updates2d_8c_source.html">wind_updates2d.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a764eaf37b6117ac7a17b1c049c1d2d16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a764eaf37b6117ac7a17b1c049c1d2d16">&#9670;&nbsp;</a></span>LINELEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LINELEN&#160;&#160;&#160;256</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wind__updates2d_8c_source.html#l00022">22</a> of file <a class="el" href="wind__updates2d_8c_source.html">wind_updates2d.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="aa1f75e088856c1c47527ce62bea5c913"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1f75e088856c1c47527ce62bea5c913">&#9670;&nbsp;</a></span>wind_rad_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int wind_rad_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>zeros those portions of the wind which contain the radiation properties of the wind, i.e those portions which should be set to zeroed when the structure of the wind has been changed or when you simply want to start off a calculation in a known state </p>
<dl class="section return"><dt>Returns</dt><dd>Always returns 0</dd></dl>
<p>The routine is called at the beginning of each ionization calculation cycle. It should zero all heating and radiation induced cooling in the wind array. Since cooling is recalculated in wind_update, one needs to be sure that all of the appropriate cooling terms are also rezeroed there as well.</p>
<h3>Notes</h3>

<p class="definition">Definition at line <a class="el" href="wind__updates2d_8c_source.html#l01013">1013</a> of file <a class="el" href="wind__updates2d_8c_source.html">wind_updates2d.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="wind__updates2d_8c_aa1f75e088856c1c47527ce62bea5c913_cgraph.png" border="0" usemap="#wind__updates2d_8c_aa1f75e088856c1c47527ce62bea5c913_cgraph" alt=""/></div>
<map name="wind__updates2d_8c_aa1f75e088856c1c47527ce62bea5c913_cgraph" id="wind__updates2d_8c_aa1f75e088856c1c47527ce62bea5c913_cgraph">
<area shape="rect" id="node2" href="foo_8h.html#a53e97649d5cd9a1fab024ab99489ddb1" title="alpha_sp" alt="" coords="135,5,197,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="wind__updates2d_8c_aa1f75e088856c1c47527ce62bea5c913_icgraph.png" border="0" usemap="#wind__updates2d_8c_aa1f75e088856c1c47527ce62bea5c913_icgraph" alt=""/></div>
<map name="wind__updates2d_8c_aa1f75e088856c1c47527ce62bea5c913_icgraph" id="wind__updates2d_8c_aa1f75e088856c1c47527ce62bea5c913_icgraph">
<area shape="rect" id="node2" href="templates_8h.html#a28fc174aa63a5eeef6de99ef392e1616" title="run the ionization cycles for a python model " alt="" coords="135,5,244,32"/>
</map>
</div>

</div>
</div>
<a id="a33b6675f8fdb790ed332fd9f5df994d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33b6675f8fdb790ed332fd9f5df994d3">&#9670;&nbsp;</a></span>wind_update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int wind_update </td>
          <td>(</td>
          <td class="paramtype">w&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>updates the parameters in the wind that are affected by radiation, including ion densities. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">WindPtr</td><td>The entire wind </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Always returns 0</dd></dl>
<p>This is the main routine used to update the wind at the end of an ionization cycle (in preparation for a new cycle). The routine is parallelized to save time</p>
<h3>Notes</h3>
<p>At the time wind_update is called the various quantities that are accumulated during the photon transfer part of the cycle has been accumulated and shared between the threads. Here certain plasma cells are assigned to each thread so that the ionization structure can be updated, and each thread is responsible for calculaing the updates for a certain set of cells. At the end of the routine the updates are collected and reshared.</p>
<p>The real need for prallelising the routine is the work done in ion_abundances</p>
<p>Once this is done, various checks are made to determined what happened as a function of the updates, various variables in geo are updated, and for a hydro model the results are written to a file</p>
<p>This routine is nearly 1000 lines long and might beneifit from breaking it into functionl blocks, e.g by separating out the mpi communicaiton into their own routines. </p>

<p class="definition">Definition at line <a class="el" href="wind__updates2d_8c_source.html#l00062">62</a> of file <a class="el" href="wind__updates2d_8c_source.html">wind_updates2d.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a3c086b2e71aab221283031cdd9ae00ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c086b2e71aab221283031cdd9ae00ba">&#9670;&nbsp;</a></span>num_updates</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int num_updates = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wind__updates2d_8c_source.html#l00026">26</a> of file <a class="el" href="wind__updates2d_8c_source.html">wind_updates2d.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_b2f33c71d4aa5e7af42a1ca61ff5af1b.html">source</a></li><li class="navelem"><a class="el" href="wind__updates2d_8c.html">wind_updates2d.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
