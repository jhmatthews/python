<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Python MCRT: /Users/mhewitt/python/source/cylind_var.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Python MCRT
   </div>
   <div id="projectbrief">A Monte Carlo radiative transfer and ionization code</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('cylind__var_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">cylind_var.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Generic routines for handling a modified version of cylindrical coordinate systems to better model vertically extened disks.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;math.h&gt;</code><br />
<code>#include &quot;<a class="el" href="atomic_8h_source.html">atomic.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="python_8h_source.html">python.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for cylind_var.c:</div>
<div class="dyncontent">
<div class="center"><img src="cylind__var_8c__incl.png" border="0" usemap="#_2_users_2mhewitt_2python_2source_2cylind__var_8c" alt=""/></div>
<map name="_2_users_2mhewitt_2python_2source_2cylind__var_8c" id="_2_users_2mhewitt_2python_2source_2cylind__var_8c">
<area shape="rect" id="node5" href="atomic_8h.html" title="atomic.h" alt="" coords="236,95,296,121"/>
<area shape="rect" id="node6" href="python_8h.html" title="python.h" alt="" coords="320,95,380,121"/>
<area shape="rect" id="node7" href="log_8h.html" title="log.h" alt="" coords="204,169,248,196"/>
<area shape="rect" id="node8" href="version_8h.html" title="version.h" alt="" coords="272,169,335,196"/>
<area shape="rect" id="node9" href="templates_8h.html" title="templates.h" alt="" coords="359,169,432,196"/>
<area shape="rect" id="node10" href="recipes_8h.html" title="recipes.h" alt="" coords="456,169,519,196"/>
</map>
</div>
</div>
<p><a href="cylind__var_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a95d55ebfa2f2f1bd14867ad6a6cc9bfb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cylind__var_8c.html#a95d55ebfa2f2f1bd14867ad6a6cc9bfb">RESOLUTION</a>&#160;&#160;&#160;1000</td></tr>
<tr class="separator:a95d55ebfa2f2f1bd14867ad6a6cc9bfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a52b5367a4a1a8d1bbe9446a5571a81fd"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cylind__var_8c.html#a52b5367a4a1a8d1bbe9446a5571a81fd">cylvar_ds_in_cell</a> (int ndom, <a class="el" href="python_8h.html#ad2424d53ebcf811656882a87e11b440c">PhotPtr</a> p)</td></tr>
<tr class="memdesc:a52b5367a4a1a8d1bbe9446a5571a81fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">cylin_ds_in_cell calculates the distance to the far boundary of the cell in which the photon bundle resides.  <a href="#a52b5367a4a1a8d1bbe9446a5571a81fd">More...</a><br /></td></tr>
<tr class="separator:a52b5367a4a1a8d1bbe9446a5571a81fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95a5dd7b17dd91fc7d21b44ee290d256"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cylind__var_8c.html#a95a5dd7b17dd91fc7d21b44ee290d256">cylvar_make_grid</a> (<a class="el" href="python_8h.html#ad957272e4ddecfb558775b2aeddf2ac4">WindPtr</a> w, int ndom)</td></tr>
<tr class="memdesc:a95a5dd7b17dd91fc7d21b44ee290d256"><td class="mdescLeft">&#160;</td><td class="mdescRight">defines the cells in a cylindrical grid when the disk is vertically extended.  <a href="#a95a5dd7b17dd91fc7d21b44ee290d256">More...</a><br /></td></tr>
<tr class="separator:a95a5dd7b17dd91fc7d21b44ee290d256"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99c605bb65f5950301b4adf1ff09eb8d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cylind__var_8c.html#a99c605bb65f5950301b4adf1ff09eb8d">cylvar_wind_complete</a> (int ndom, <a class="el" href="python_8h.html#ad957272e4ddecfb558775b2aeddf2ac4">WindPtr</a> w)</td></tr>
<tr class="memdesc:a99c605bb65f5950301b4adf1ff09eb8d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Completes the definition of some of the positonal variables in the wind, and creates some subidiary arrays.  <a href="#a99c605bb65f5950301b4adf1ff09eb8d">More...</a><br /></td></tr>
<tr class="separator:a99c605bb65f5950301b4adf1ff09eb8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95334daf522cc6a4ac43e85e759f4a31"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cylind__var_8c.html#a95334daf522cc6a4ac43e85e759f4a31">cylvar_volumes</a> (int ndom, <a class="el" href="python_8h.html#ad957272e4ddecfb558775b2aeddf2ac4">WindPtr</a> w)</td></tr>
<tr class="memdesc:a95334daf522cc6a4ac43e85e759f4a31"><td class="mdescLeft">&#160;</td><td class="mdescRight">w) calculates the wind volume of a cylindrical cell allowing for the fact that some cells  <a href="#a95334daf522cc6a4ac43e85e759f4a31">More...</a><br /></td></tr>
<tr class="separator:a95334daf522cc6a4ac43e85e759f4a31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32c03e10ad1712cb98a72b444cca5499"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cylind__var_8c.html#a32c03e10ad1712cb98a72b444cca5499">cylvar_where_in_grid</a> (int ndom, <a class="el" href="import__cylindrical_8c.html#a099bc7b5a9501685180c163c1ffb67d0">x</a>, int ichoice, double *fx, double *fz)</td></tr>
<tr class="memdesc:a32c03e10ad1712cb98a72b444cca5499"><td class="mdescLeft">&#160;</td><td class="mdescRight">locates the grid position of the vector, when one is using modified cylindrical coordinates, with the z heights varying.  <a href="#a32c03e10ad1712cb98a72b444cca5499">More...</a><br /></td></tr>
<tr class="separator:a32c03e10ad1712cb98a72b444cca5499"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a352d864e752cc2b9041a5e2ad1e5ffff"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cylind__var_8c.html#a352d864e752cc2b9041a5e2ad1e5ffff">cylvar_get_random_location</a> (int n, <a class="el" href="import__cylindrical_8c.html#a099bc7b5a9501685180c163c1ffb67d0">x</a>)</td></tr>
<tr class="memdesc:a352d864e752cc2b9041a5e2ad1e5ffff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate a position at a random location within a specific cell of a domain with modified-cylindrical coordinates.  <a href="#a352d864e752cc2b9041a5e2ad1e5ffff">More...</a><br /></td></tr>
<tr class="separator:a352d864e752cc2b9041a5e2ad1e5ffff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ec3f5fd8390071adf98cdaee7afb064"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cylind__var_8c.html#a2ec3f5fd8390071adf98cdaee7afb064">cylvar_extend_density</a> (int ndom, <a class="el" href="python_8h.html#ad957272e4ddecfb558775b2aeddf2ac4">WindPtr</a> w)</td></tr>
<tr class="memdesc:a2ec3f5fd8390071adf98cdaee7afb064"><td class="mdescLeft">&#160;</td><td class="mdescRight">extends the density to regions just outside the wind regiions so that extrapolations of density can be made there  <a href="#a2ec3f5fd8390071adf98cdaee7afb064">More...</a><br /></td></tr>
<tr class="separator:a2ec3f5fd8390071adf98cdaee7afb064"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3185dc024d7c8bf77fe0be0dc128a272"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cylind__var_8c.html#a3185dc024d7c8bf77fe0be0dc128a272">cylvar_coord_fraction</a> (int ndom, int ichoice, <a class="el" href="import__cylindrical_8c.html#a099bc7b5a9501685180c163c1ffb67d0">x</a>, ii, frac, int *nelem)</td></tr>
<tr class="memdesc:a3185dc024d7c8bf77fe0be0dc128a272"><td class="mdescLeft">&#160;</td><td class="mdescRight">calculate the fractional position of a position in the 2d grid in a coordinate for modified cylindrical coordiantes  <a href="#a3185dc024d7c8bf77fe0be0dc128a272">More...</a><br /></td></tr>
<tr class="separator:a3185dc024d7c8bf77fe0be0dc128a272"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab41f5035a2b40b29c69e962c28b73471"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cylind__var_8c.html#ab41f5035a2b40b29c69e962c28b73471">cylvar_n_approx</a></td></tr>
<tr class="separator:ab41f5035a2b40b29c69e962c28b73471"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5785a52970e5d224302940b772cb9e60"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cylind__var_8c.html#a5785a52970e5d224302940b772cb9e60">ierr_cylvar_where_in_grid</a> = 0</td></tr>
<tr class="separator:a5785a52970e5d224302940b772cb9e60"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Generic routines for handling a modified version of cylindrical coordinate systems to better model vertically extened disks. </p>
<dl class="section author"><dt>Author</dt><dd>ksl </dd></dl>
<dl class="section date"><dt>Date</dt><dd>May, 2018</dd></dl>
<p>The overall idea for a vertically extended disk is as follows:</p>
<p>We will create a cylindicral coordinate system in which the rho coordinates are established just as for a cylindrical system. Howver, the boundaries of the cell in the z direction will vary with radius from the star. The vertices of the cells will be defined so that they have fixed offsets from the disk surface. The "top" and "bottom" edges are not parallel to the xy plane, but mimic the disk surface.</p>
<p>Ultimately the disk surface will be defined so that it matches the edges of cells when a photon is in the wind. Outise id will be defined by zdisk as previously.</p>
<dl class="bug"><dt><b><a class="el" href="bug.html#_bug000013">Bug:</a></b></dt><dd>These routines are currently broken. See issue #159 </dd></dl>

<p class="definition">Definition in file <a class="el" href="cylind__var_8c_source.html">cylind_var.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a95d55ebfa2f2f1bd14867ad6a6cc9bfb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95d55ebfa2f2f1bd14867ad6a6cc9bfb">&#9670;&nbsp;</a></span>RESOLUTION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RESOLUTION&#160;&#160;&#160;1000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cylind__var_8c_source.html#l00482">482</a> of file <a class="el" href="cylind__var_8c_source.html">cylind_var.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a3185dc024d7c8bf77fe0be0dc128a272"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3185dc024d7c8bf77fe0be0dc128a272">&#9670;&nbsp;</a></span>cylvar_coord_fraction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cylvar_coord_fraction </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ndom</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ichoice</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="import__cylindrical_8c.html#a099bc7b5a9501685180c163c1ffb67d0">x</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ii&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">frac&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>nelem</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>calculate the fractional position of a position in the 2d grid in a coordinate for modified cylindrical coordiantes </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">int</td><td>ndom The domain number </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">int</td><td>ichoice if 0, interpolate on veritices; if 1 interpolate on the centers of the cells. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">double</td><td>x[] A position </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">int</td><td>ii[] The cell numbers bounding the positions </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">double</td><td>frac[] the array that contains the fractional contribution of the corresponding element </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">int</td><td>* nelem The number of cells involved in interpolation </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Always returns 1</dd></dl>
<p>ii[] &ndash;&gt; an array that contains the 1-d element numbers that must be summed nelem &ndash;&gt; the number of elements that must be summed, nominally 2 for a spherical grid and 4 for a two dimensional grid. (For a 3 d grid it would be 6, but we have not implemented this.</p>
<h3>Notes</h3>
<p>There are numerous times when one wants the value of an interpoalted variable in the wind. There is no easy way to interpolate the variable easily. What this routine does is calculate the fractional contributions of elements in the array to that position. Then one must sum up the actual variable else where</p>
<p>If positions are outside the grid, coord_fraction attempts to give you the value at the edge of teh grid.</p>
<p>It's possible that coord_fraction could be used to interpolate beyond the edge of the grid where a variable is defined, although this is not done at present!</p>
<dl class="bug"><dt><b><a class="el" href="bug.html#_bug000014">Bug:</a></b></dt><dd>This routine does not look correct. It does not make any allowance for differences in the z heights of the cells as a function of rho.</dd></dl>

<p class="definition">Definition at line <a class="el" href="cylind__var_8c_source.html#l01217">1217</a> of file <a class="el" href="cylind__var_8c_source.html">cylind_var.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="cylind__var_8c_a3185dc024d7c8bf77fe0be0dc128a272_cgraph.png" border="0" usemap="#cylind__var_8c_a3185dc024d7c8bf77fe0be0dc128a272_cgraph" alt=""/></div>
<map name="cylind__var_8c_a3185dc024d7c8bf77fe0be0dc128a272_cgraph" id="cylind__var_8c_a3185dc024d7c8bf77fe0be0dc128a272_cgraph">
<area shape="rect" id="node2" href="cylind__var_8c.html#a32c03e10ad1712cb98a72b444cca5499" title="locates the grid position of the vector, when one is using modified cylindrical coordinates, with the z heights varying. " alt="" coords="171,107,287,133"/>
<area shape="rect" id="node6" href="log_8h.html#a4f4caa375f1c3a9def422000f305cce5" title="Print/write out an error message. " alt="" coords="360,157,404,184"/>
<area shape="rect" id="node13" href="log_8h.html#aaadbb20af7b628f26e81e4e49b1a379f" title="Check that a variable is valid double precision number. " alt="" coords="477,208,553,235"/>
<area shape="rect" id="node3" href="foo_8h.html#af8c5f231035fc1a85000b9849b4fb0ed" title="fraction" alt="" coords="355,5,409,32"/>
<area shape="rect" id="node4" href="foo_8h.html#a172ddeb06a81951700723a0b02d90557" title="Translate from the 2d element for an individual domain to the wind element number. " alt="" coords="343,56,421,83"/>
<area shape="rect" id="node5" href="foo_8h.html#a829a331b30311e6768f4cc16a70fdab5" title="where_in_2dcell" alt="" coords="335,107,429,133"/>
<area shape="rect" id="node7" href="xlog_8c.html#aeb93dfd882dd6a658b86662e6e219a09" title="Open a log file. " alt="" coords="849,132,907,159"/>
<area shape="rect" id="node8" href="xlog_8c.html#aeaba9fb5d129e3ab9d5efa760206deff" title="track the number of errors of each type " alt="" coords="479,157,552,184"/>
<area shape="rect" id="node9" href="xlog_8c.html#a3d395705c83c0bda5aeee6a271fdfd47" title="Summarize the errors that have occurred. " alt="" coords="601,157,691,184"/>
<area shape="rect" id="node12" href="xlog_8c.html#a4f4caa375f1c3a9def422000f305cce5" title="Print/write out an error message. " alt="" coords="624,208,668,235"/>
<area shape="rect" id="node10" href="xlog_8c.html#a9a25be4f0d7d13fccc8457774d74167f" title="Print/write an informational message. " alt="" coords="751,132,789,159"/>
<area shape="rect" id="node11" href="log_8h.html#a488c6292e324fa9bd3793694c3d29826" title="message" alt="" coords="739,183,801,209"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="cylind__var_8c_a3185dc024d7c8bf77fe0be0dc128a272_icgraph.png" border="0" usemap="#cylind__var_8c_a3185dc024d7c8bf77fe0be0dc128a272_icgraph" alt=""/></div>
<map name="cylind__var_8c_a3185dc024d7c8bf77fe0be0dc128a272_icgraph" id="cylind__var_8c_a3185dc024d7c8bf77fe0be0dc128a272_icgraph">
<area shape="rect" id="node2" href="util_8c.html#a58278ee8209899477833e9415625667b" title="calculate the fractional contributions in interpolations of values of quantities, such as electron de..." alt="" coords="171,5,256,32"/>
</map>
</div>

</div>
</div>
<a id="a52b5367a4a1a8d1bbe9446a5571a81fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52b5367a4a1a8d1bbe9446a5571a81fd">&#9670;&nbsp;</a></span>cylvar_ds_in_cell()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double cylvar_ds_in_cell </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ndom</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="python_8h.html#ad2424d53ebcf811656882a87e11b440c">PhotPtr</a>&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>cylin_ds_in_cell calculates the distance to the far boundary of the cell in which the photon bundle resides. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">int</td><td>ndom The number of the domain of interest </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">PhotPtr</td><td>p Photon pointer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Distance to the far boundary of the cell in which the photon currently resides.</dd></dl>
<p>Negative numbers (and zero) should be regarded as errors.</p>
<p>This routine solves the quadratic equations that allow one to determine the distance a photon can travel within a cell before hitting the edge of the cell.</p>
<h3>Notes</h3>
<p>This differs from the cylindrical case in searching for the a boundaries of the cell </p>

<p class="definition">Definition at line <a class="el" href="cylind__var_8c_source.html#l00096">96</a> of file <a class="el" href="cylind__var_8c_source.html">cylind_var.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="cylind__var_8c_a52b5367a4a1a8d1bbe9446a5571a81fd_cgraph.png" border="0" usemap="#cylind__var_8c_a52b5367a4a1a8d1bbe9446a5571a81fd_cgraph" alt=""/></div>
<map name="cylind__var_8c_a52b5367a4a1a8d1bbe9446a5571a81fd_cgraph" id="cylind__var_8c_a52b5367a4a1a8d1bbe9446a5571a81fd_cgraph">
<area shape="rect" id="node2" href="foo_8h.html#a1db4ad38f132371d7fe31fdd998ae53e" title="where_in_grid" alt="" coords="152,5,237,32"/>
<area shape="rect" id="node3" href="log_8h.html#a4f4caa375f1c3a9def422000f305cce5" title="Print/write out an error message. " alt="" coords="173,56,217,83"/>
<area shape="rect" id="node10" href="foo_8h.html#aed64e9379499a741e8a7c42376e20530" title="Translate a cell number in the wind to the two&#45;d grid position in a specific domain. " alt="" coords="156,107,233,133"/>
<area shape="rect" id="node11" href="foo_8h.html#a0940d7c3ced7e511ec385d4de758b436" title="quadratic" alt="" coords="163,157,226,184"/>
<area shape="rect" id="node12" href="foo_8h.html#a4a0398c1230c6d21c5c51f4750ca2ea1" title="(cc, p) This is a new version of introduced in order to allow cylvar coordinates Eventually it is int..." alt="" coords="158,208,231,235"/>
<area shape="rect" id="node4" href="xlog_8c.html#aeb93dfd882dd6a658b86662e6e219a09" title="Open a log file. " alt="" coords="655,69,712,96"/>
<area shape="rect" id="node5" href="xlog_8c.html#aeaba9fb5d129e3ab9d5efa760206deff" title="track the number of errors of each type " alt="" coords="285,95,359,121"/>
<area shape="rect" id="node6" href="xlog_8c.html#a3d395705c83c0bda5aeee6a271fdfd47" title="Summarize the errors that have occurred. " alt="" coords="407,81,496,108"/>
<area shape="rect" id="node9" href="xlog_8c.html#a4f4caa375f1c3a9def422000f305cce5" title="Print/write out an error message. " alt="" coords="429,132,473,159"/>
<area shape="rect" id="node7" href="xlog_8c.html#a9a25be4f0d7d13fccc8457774d74167f" title="Print/write an informational message. " alt="" coords="556,69,595,96"/>
<area shape="rect" id="node8" href="log_8h.html#a488c6292e324fa9bd3793694c3d29826" title="message" alt="" coords="544,120,607,147"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="cylind__var_8c_a52b5367a4a1a8d1bbe9446a5571a81fd_icgraph.png" border="0" usemap="#cylind__var_8c_a52b5367a4a1a8d1bbe9446a5571a81fd_icgraph" alt=""/></div>
<map name="cylind__var_8c_a52b5367a4a1a8d1bbe9446a5571a81fd_icgraph" id="cylind__var_8c_a52b5367a4a1a8d1bbe9446a5571a81fd_icgraph">
<area shape="rect" id="node2" href="templates_8h.html#afee395233fbca5e632fd3ef51106f74c" title="calculates the distance photon can travel within the cell that it is currently in. " alt="" coords="152,31,219,57"/>
<area shape="rect" id="node3" href="templates_8h.html#aa1ffd17034054d51819328d892fc57e8" title="translates the photon from its current position to the edge of the wind. " alt="" coords="267,5,372,32"/>
<area shape="rect" id="node5" href="templates_8h.html#a0118547dede9b08b5ac6609b4313e3e8" title="translates the photon within a single cell in the wind. " alt="" coords="269,56,369,83"/>
<area shape="rect" id="node4" href="templates_8h.html#ae77272897af1eb8f6ebd0f7cfe2932e8" title="a steering routine that either calls _in_space or _in_wind depending upon the current location of the..." alt="" coords="420,31,480,57"/>
</map>
</div>

</div>
</div>
<a id="a2ec3f5fd8390071adf98cdaee7afb064"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ec3f5fd8390071adf98cdaee7afb064">&#9670;&nbsp;</a></span>cylvar_extend_density()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cylvar_extend_density </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ndom</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="python_8h.html#ad957272e4ddecfb558775b2aeddf2ac4">WindPtr</a>&#160;</td>
          <td class="paramname"><em>w</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>extends the density to regions just outside the wind regiions so that extrapolations of density can be made there </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">int</td><td>ndom The domain of interest </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">WindPtr</td><td>w The entire wind </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Always returns 0</dd></dl>
<p>The densities are stored in the approapriate Plasma cells (rather than in the Wind)</p>
<p>We need to updated the densities immediately outside the wind so that the density interpolation in resonate will work. In this case all we have done is to copy the densities from the cell which is just in the wind (as one goes outward) to the cell that is just inside (or outside) the wind.</p>
<p>In cylindrical coordinates, the fast dimension is z; grid positions increase up in z, and then out in r. In spperical polar coordinates, the fast dimension is theta; the grid increases in theta (measured) from the z axis), and then in r.</p>
<h3>Notes</h3>
<p>Instead of copying every thing is accomplished using pointers. </p>

<p class="definition">Definition at line <a class="el" href="cylind__var_8c_source.html#l01040">1040</a> of file <a class="el" href="cylind__var_8c_source.html">cylind_var.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="cylind__var_8c_a2ec3f5fd8390071adf98cdaee7afb064_cgraph.png" border="0" usemap="#cylind__var_8c_a2ec3f5fd8390071adf98cdaee7afb064_cgraph" alt=""/></div>
<map name="cylind__var_8c_a2ec3f5fd8390071adf98cdaee7afb064_cgraph" id="cylind__var_8c_a2ec3f5fd8390071adf98cdaee7afb064_cgraph">
<area shape="rect" id="node2" href="foo_8h.html#a172ddeb06a81951700723a0b02d90557" title="Translate from the 2d element for an individual domain to the wind element number. " alt="" coords="175,5,252,32"/>
</map>
</div>

</div>
</div>
<a id="a352d864e752cc2b9041a5e2ad1e5ffff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a352d864e752cc2b9041a5e2ad1e5ffff">&#9670;&nbsp;</a></span>cylvar_get_random_location()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cylvar_get_random_location </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="import__cylindrical_8c.html#a099bc7b5a9501685180c163c1ffb67d0">x</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generate a position at a random location within a specific cell of a domain with modified-cylindrical coordinates. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">int</td><td>n Cell in wmain in which random position is to be generated </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">double</td><td>x[] The position </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A status flag indicating whether the position is or is not in the wind.</dd></dl>
<p>The routine generates a position somewhere in the (wind portion of the) volumme defined by a cell.</p>
<h3>Notes</h3>
<p>The encapsulation steps should probably put into a separate routine since this is used several times </p>

<p class="definition">Definition at line <a class="el" href="cylind__var_8c_source.html#l00892">892</a> of file <a class="el" href="cylind__var_8c_source.html">cylind_var.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="cylind__var_8c_a352d864e752cc2b9041a5e2ad1e5ffff_cgraph.png" border="0" usemap="#cylind__var_8c_a352d864e752cc2b9041a5e2ad1e5ffff_cgraph" alt=""/></div>
<map name="cylind__var_8c_a352d864e752cc2b9041a5e2ad1e5ffff_cgraph" id="cylind__var_8c_a352d864e752cc2b9041a5e2ad1e5ffff_cgraph">
<area shape="rect" id="node2" href="foo_8h.html#a4a0210aea098f52ca60dfbc90de4ecee" title="Calculate the Roche potential at position indicated by the photon p_roche and the length s..." alt="" coords="229,5,267,32"/>
<area shape="rect" id="node3" href="foo_8h.html#aed64e9379499a741e8a7c42376e20530" title="Translate a cell number in the wind to the two&#45;d grid position in a specific domain. " alt="" coords="209,56,287,83"/>
<area shape="rect" id="node4" href="foo_8h.html#a451b4740f3d1e12cb07885b0d3e5ef1b" title="Gets a random number from the generator set up in init_rand. " alt="" coords="200,107,296,133"/>
<area shape="rect" id="node5" href="foo_8h.html#a2c852998cd074100b68f8750a8d8ca99" title="where_in_wind" alt="" coords="203,157,293,184"/>
<area shape="rect" id="node6" href="foo_8h.html#a829a331b30311e6768f4cc16a70fdab5" title="where_in_2dcell" alt="" coords="201,208,295,235"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="cylind__var_8c_a352d864e752cc2b9041a5e2ad1e5ffff_icgraph.png" border="0" usemap="#cylind__var_8c_a352d864e752cc2b9041a5e2ad1e5ffff_icgraph" alt=""/></div>
<map name="cylind__var_8c_a352d864e752cc2b9041a5e2ad1e5ffff_icgraph" id="cylind__var_8c_a352d864e752cc2b9041a5e2ad1e5ffff_icgraph">
<area shape="rect" id="node2" href="wind2d_8c.html#af8f7fd3a6d5f7872ee87beb27dcba899" title="is simply will produce a postion at a random place in a cell n " alt="" coords="200,5,316,32"/>
</map>
</div>

</div>
</div>
<a id="a95a5dd7b17dd91fc7d21b44ee290d256"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95a5dd7b17dd91fc7d21b44ee290d256">&#9670;&nbsp;</a></span>cylvar_make_grid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cylvar_make_grid </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="python_8h.html#ad957272e4ddecfb558775b2aeddf2ac4">WindPtr</a>&#160;</td>
          <td class="paramname"><em>w</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ndom</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>defines the cells in a cylindrical grid when the disk is vertically extended. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">[in</td><td>out] WindPtr w The structure which defines the wind in Python </td></tr>
    <tr><td class="paramname">[in</td><td>out] int ndom The domain number of interest </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Always returns 0</dd></dl>
<p>The cylvar coordinate system basically adds and offset determined by zdisk(r) to each z position in the grid. Beyond geo.diskrad the coordinate system stays fixed in the z direction (on the assumption that the forumula for the disk is not valid there.)</p>
<p>The coordinate system is adjusted so the last element in the veritical direction of the grid is always the same.</p>
<h3>Notes</h3>
<p>??? NOTES ??? </p>

<p class="definition">Definition at line <a class="el" href="cylind__var_8c_source.html#l00220">220</a> of file <a class="el" href="cylind__var_8c_source.html">cylind_var.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="cylind__var_8c_a95a5dd7b17dd91fc7d21b44ee290d256_cgraph.png" border="0" usemap="#cylind__var_8c_a95a5dd7b17dd91fc7d21b44ee290d256_cgraph" alt=""/></div>
<map name="cylind__var_8c_a95a5dd7b17dd91fc7d21b44ee290d256_cgraph" id="cylind__var_8c_a95a5dd7b17dd91fc7d21b44ee290d256_cgraph">
<area shape="rect" id="node2" href="foo_8h.html#a172ddeb06a81951700723a0b02d90557" title="Translate from the 2d element for an individual domain to the wind element number. " alt="" coords="153,5,231,32"/>
<area shape="rect" id="node3" href="disk_8c.html#a4027a82b7c3df9474704080c8b3137cc" title="Calculate the height of the disk at a certain radius. " alt="" coords="169,56,215,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="cylind__var_8c_a95a5dd7b17dd91fc7d21b44ee290d256_icgraph.png" border="0" usemap="#cylind__var_8c_a95a5dd7b17dd91fc7d21b44ee290d256_icgraph" alt=""/></div>
<map name="cylind__var_8c_a95a5dd7b17dd91fc7d21b44ee290d256_icgraph" id="cylind__var_8c_a95a5dd7b17dd91fc7d21b44ee290d256_icgraph">
<area shape="rect" id="node2" href="wind2d_8c.html#a41ee5cb999f1d4258673b6134394b4cc" title="initializes the structures which characterize the wind, including wmain and plasmamain. " alt="" coords="153,5,229,32"/>
<area shape="rect" id="node3" href="python_8c.html#afced8478b91af5c169926dfa4426333d" title="The main routine for Python, which supervises the ingest of data defining a model, the initializtion of the model, and actual run of the model, and writing the data to the disk. " alt="" coords="277,5,321,32"/>
</map>
</div>

</div>
</div>
<a id="a95334daf522cc6a4ac43e85e759f4a31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95334daf522cc6a4ac43e85e759f4a31">&#9670;&nbsp;</a></span>cylvar_volumes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cylvar_volumes </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ndom</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="python_8h.html#ad957272e4ddecfb558775b2aeddf2ac4">WindPtr</a>&#160;</td>
          <td class="paramname"><em>w</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>w) calculates the wind volume of a cylindrical cell allowing for the fact that some cells </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">int</td><td>ndom the domain poiinter </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">WindPtr</td><td>w the entire wind </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Always returns 0</dd></dl>
<p>This is a brute_force integration of the volume. The technique is completely general. It does not depend on the shape of the cell, and could be used for most of the coodinate systems.</p>
<h3>Notes</h3>
<p>Where_in grid does not tell you whether the photon is in the wind or not. </p>

<p class="definition">Definition at line <a class="el" href="cylind__var_8c_source.html#l00506">506</a> of file <a class="el" href="cylind__var_8c_source.html">cylind_var.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="cylind__var_8c_a95334daf522cc6a4ac43e85e759f4a31_cgraph.png" border="0" usemap="#cylind__var_8c_a95334daf522cc6a4ac43e85e759f4a31_cgraph" alt=""/></div>
<map name="cylind__var_8c_a95334daf522cc6a4ac43e85e759f4a31_cgraph" id="cylind__var_8c_a95334daf522cc6a4ac43e85e759f4a31_cgraph">
<area shape="rect" id="node2" href="foo_8h.html#a172ddeb06a81951700723a0b02d90557" title="Translate from the 2d element for an individual domain to the wind element number. " alt="" coords="150,5,227,32"/>
<area shape="rect" id="node3" href="bilinear_8c.html#a0d7059db01a063789ca5b78386eb2889" title="calculates the fractional position in the coordinate grid of a 2d vector x. " alt="" coords="169,56,209,83"/>
<area shape="rect" id="node12" href="foo_8h.html#a2c852998cd074100b68f8750a8d8ca99" title="where_in_wind" alt="" coords="144,107,233,133"/>
<area shape="rect" id="node4" href="bilinear_8c.html#af582498786ae60301965c85d405d7cde" title="solves a quadratic of the form 0=ax**2+bx+c " alt="" coords="281,31,349,57"/>
<area shape="rect" id="node5" href="log_8h.html#a4f4caa375f1c3a9def422000f305cce5" title="Print/write out an error message. " alt="" coords="293,81,337,108"/>
<area shape="rect" id="node6" href="xlog_8c.html#aeb93dfd882dd6a658b86662e6e219a09" title="Open a log file. " alt="" coords="767,81,824,108"/>
<area shape="rect" id="node7" href="xlog_8c.html#aeaba9fb5d129e3ab9d5efa760206deff" title="track the number of errors of each type " alt="" coords="397,107,471,133"/>
<area shape="rect" id="node8" href="xlog_8c.html#a3d395705c83c0bda5aeee6a271fdfd47" title="Summarize the errors that have occurred. " alt="" coords="519,93,608,120"/>
<area shape="rect" id="node11" href="xlog_8c.html#a4f4caa375f1c3a9def422000f305cce5" title="Print/write out an error message. " alt="" coords="541,144,585,171"/>
<area shape="rect" id="node9" href="xlog_8c.html#a9a25be4f0d7d13fccc8457774d74167f" title="Print/write an informational message. " alt="" coords="668,81,707,108"/>
<area shape="rect" id="node10" href="log_8h.html#a488c6292e324fa9bd3793694c3d29826" title="message" alt="" coords="656,132,719,159"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="cylind__var_8c_a95334daf522cc6a4ac43e85e759f4a31_icgraph.png" border="0" usemap="#cylind__var_8c_a95334daf522cc6a4ac43e85e759f4a31_icgraph" alt=""/></div>
<map name="cylind__var_8c_a95334daf522cc6a4ac43e85e759f4a31_icgraph" id="cylind__var_8c_a95334daf522cc6a4ac43e85e759f4a31_icgraph">
<area shape="rect" id="node2" href="wind2d_8c.html#a41ee5cb999f1d4258673b6134394b4cc" title="initializes the structures which characterize the wind, including wmain and plasmamain. " alt="" coords="144,5,220,32"/>
<area shape="rect" id="node3" href="python_8c.html#afced8478b91af5c169926dfa4426333d" title="The main routine for Python, which supervises the ingest of data defining a model, the initializtion of the model, and actual run of the model, and writing the data to the disk. " alt="" coords="268,5,312,32"/>
</map>
</div>

</div>
</div>
<a id="a32c03e10ad1712cb98a72b444cca5499"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32c03e10ad1712cb98a72b444cca5499">&#9670;&nbsp;</a></span>cylvar_where_in_grid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cylvar_where_in_grid </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ndom</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="import__cylindrical_8c.html#a099bc7b5a9501685180c163c1ffb67d0">x</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ichoice</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>fx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>fz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>locates the grid position of the vector, when one is using modified cylindrical coordinates, with the z heights varying. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">int</td><td>ndom The domain number </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">double</td><td>x[] A position </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">int</td><td>ichoice 0 locates the grid cell using the normal cell boundaries, whereas a non-zero value will use the midpoints of the cells to calculate fractions </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">[in</td><td>out] double * fx The fractional distance in the rho direction of the position in the cel </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">[in</td><td>out] double * fz The fractional distance in the z direction of the position in the cel </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>where_in_grid normally returns the cell number associated with a position.</dd></dl>
<p>If the position is in the grid this will be a positive integer &lt; The number of cells int he domain</p><ul>
<li>x is inside the grid -1</li>
<li>x is outside the grid -2</li>
</ul>
<p>cylvar_where_in_grid returns the grid cell, and (because it has to be calculated) the fractional position).</p>
<h3>Notes</h3>
<p>Where_in grid does not tell you whether the x is in the wind or not.</p>
<p>What one means by inside or outside the grid may well be different for different coordinate systems.</p>
<p>The basic approach is to calculate the rho position which should tell you which "column" of the wind you are in, and then to calculate the specific cell in the column. </p>

<p class="definition">Definition at line <a class="el" href="cylind__var_8c_source.html#l00712">712</a> of file <a class="el" href="cylind__var_8c_source.html">cylind_var.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="cylind__var_8c_a32c03e10ad1712cb98a72b444cca5499_cgraph.png" border="0" usemap="#cylind__var_8c_a32c03e10ad1712cb98a72b444cca5499_cgraph" alt=""/></div>
<map name="cylind__var_8c_a32c03e10ad1712cb98a72b444cca5499_cgraph" id="cylind__var_8c_a32c03e10ad1712cb98a72b444cca5499_cgraph">
<area shape="rect" id="node2" href="foo_8h.html#af8c5f231035fc1a85000b9849b4fb0ed" title="fraction" alt="" coords="189,5,244,32"/>
<area shape="rect" id="node3" href="foo_8h.html#a172ddeb06a81951700723a0b02d90557" title="Translate from the 2d element for an individual domain to the wind element number. " alt="" coords="178,56,255,83"/>
<area shape="rect" id="node4" href="foo_8h.html#a829a331b30311e6768f4cc16a70fdab5" title="where_in_2dcell" alt="" coords="169,107,264,133"/>
<area shape="rect" id="node5" href="log_8h.html#a4f4caa375f1c3a9def422000f305cce5" title="Print/write out an error message. " alt="" coords="195,157,239,184"/>
<area shape="rect" id="node6" href="xlog_8c.html#aeb93dfd882dd6a658b86662e6e219a09" title="Open a log file. " alt="" coords="681,157,739,184"/>
<area shape="rect" id="node7" href="xlog_8c.html#aeaba9fb5d129e3ab9d5efa760206deff" title="track the number of errors of each type " alt="" coords="312,183,385,209"/>
<area shape="rect" id="node8" href="xlog_8c.html#a3d395705c83c0bda5aeee6a271fdfd47" title="Summarize the errors that have occurred. " alt="" coords="433,169,523,196"/>
<area shape="rect" id="node11" href="xlog_8c.html#a4f4caa375f1c3a9def422000f305cce5" title="Print/write out an error message. " alt="" coords="456,220,500,247"/>
<area shape="rect" id="node9" href="xlog_8c.html#a9a25be4f0d7d13fccc8457774d74167f" title="Print/write an informational message. " alt="" coords="583,157,621,184"/>
<area shape="rect" id="node10" href="log_8h.html#a488c6292e324fa9bd3793694c3d29826" title="message" alt="" coords="571,208,633,235"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="cylind__var_8c_a32c03e10ad1712cb98a72b444cca5499_icgraph.png" border="0" usemap="#cylind__var_8c_a32c03e10ad1712cb98a72b444cca5499_icgraph" alt=""/></div>
<map name="cylind__var_8c_a32c03e10ad1712cb98a72b444cca5499_icgraph" id="cylind__var_8c_a32c03e10ad1712cb98a72b444cca5499_icgraph">
<area shape="rect" id="node2" href="cylind__var_8c.html#a3185dc024d7c8bf77fe0be0dc128a272" title="calculate the fractional position of a position in the 2d grid in a coordinate for modified cylindric..." alt="" coords="169,5,287,32"/>
<area shape="rect" id="node4" href="wind2d_8c.html#ad4b676b9911462eec0740df5f8f0da55" title="locates the element in wmain associated with a postion " alt="" coords="185,56,271,83"/>
<area shape="rect" id="node3" href="util_8c.html#a58278ee8209899477833e9415625667b" title="calculate the fractional contributions in interpolations of values of quantities, such as electron de..." alt="" coords="335,5,420,32"/>
</map>
</div>

</div>
</div>
<a id="a99c605bb65f5950301b4adf1ff09eb8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99c605bb65f5950301b4adf1ff09eb8d">&#9670;&nbsp;</a></span>cylvar_wind_complete()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cylvar_wind_complete </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ndom</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="python_8h.html#ad957272e4ddecfb558775b2aeddf2ac4">WindPtr</a>&#160;</td>
          <td class="paramname"><em>w</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Completes the definition of some of the positonal variables in the wind, and creates some subidiary arrays. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">int</td><td>ndom The domain number of interest </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">WindPtr</td><td>w The structure which defines the wind in Python </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Always returns 0</dd></dl>
<p>This routine defines the windcone structures for this coordinate system and creates some arrays that are intended to aide in determining what cell one is in. The routine is specific to cylvar coordinate system.</p>
<h3>Notes</h3>
<p>In principle, one would like to fix problem that the cones are only defined out to MDIM-1 and NDIM-1, as this has the potential of wasting space. However, volumes have the same problem </p>

<p class="definition">Definition at line <a class="el" href="cylind__var_8c_source.html#l00388">388</a> of file <a class="el" href="cylind__var_8c_source.html">cylind_var.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="cylind__var_8c_a99c605bb65f5950301b4adf1ff09eb8d_cgraph.png" border="0" usemap="#cylind__var_8c_a99c605bb65f5950301b4adf1ff09eb8d_cgraph" alt=""/></div>
<map name="cylind__var_8c_a99c605bb65f5950301b4adf1ff09eb8d_cgraph" id="cylind__var_8c_a99c605bb65f5950301b4adf1ff09eb8d_cgraph">
<area shape="rect" id="node2" href="log_8h.html#a4f4caa375f1c3a9def422000f305cce5" title="Print/write out an error message. " alt="" coords="190,15,234,42"/>
<area shape="rect" id="node9" href="foo_8h.html#a172ddeb06a81951700723a0b02d90557" title="Translate from the 2d element for an individual domain to the wind element number. " alt="" coords="173,66,251,92"/>
<area shape="rect" id="node3" href="xlog_8c.html#aeb93dfd882dd6a658b86662e6e219a09" title="Open a log file. " alt="" coords="668,28,725,55"/>
<area shape="rect" id="node4" href="xlog_8c.html#aeaba9fb5d129e3ab9d5efa760206deff" title="track the number of errors of each type " alt="" coords="299,54,372,80"/>
<area shape="rect" id="node5" href="xlog_8c.html#a3d395705c83c0bda5aeee6a271fdfd47" title="Summarize the errors that have occurred. " alt="" coords="420,40,509,67"/>
<area shape="rect" id="node8" href="xlog_8c.html#a4f4caa375f1c3a9def422000f305cce5" title="Print/write out an error message. " alt="" coords="443,91,487,118"/>
<area shape="rect" id="node6" href="xlog_8c.html#a9a25be4f0d7d13fccc8457774d74167f" title="Print/write an informational message. " alt="" coords="569,28,608,55"/>
<area shape="rect" id="node7" href="log_8h.html#a488c6292e324fa9bd3793694c3d29826" title="message" alt="" coords="557,79,620,106"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="cylind__var_8c_a99c605bb65f5950301b4adf1ff09eb8d_icgraph.png" border="0" usemap="#cylind__var_8c_a99c605bb65f5950301b4adf1ff09eb8d_icgraph" alt=""/></div>
<map name="cylind__var_8c_a99c605bb65f5950301b4adf1ff09eb8d_icgraph" id="cylind__var_8c_a99c605bb65f5950301b4adf1ff09eb8d_icgraph">
<area shape="rect" id="node2" href="windsave_8c.html#ad5c30455dbf640e7a5d68132a8e4a5c5" title="A driver routine that calls coordinate&#45;system specific routines that complete the descirption of the ..." alt="" coords="173,31,263,57"/>
<area shape="rect" id="node3" href="wind2d_8c.html#a41ee5cb999f1d4258673b6134394b4cc" title="initializes the structures which characterize the wind, including wmain and plasmamain. " alt="" coords="311,5,387,32"/>
<area shape="rect" id="node5" href="windsave_8c.html#a1bf368d85f72b220cc4cba091a5e0702" title="Read back the windsavefile. " alt="" coords="315,56,383,83"/>
<area shape="rect" id="node4" href="python_8c.html#afced8478b91af5c169926dfa4426333d" title="The main routine for Python, which supervises the ingest of data defining a model, the initializtion of the model, and actual run of the model, and writing the data to the disk. " alt="" coords="435,5,479,32"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab41f5035a2b40b29c69e962c28b73471"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab41f5035a2b40b29c69e962c28b73471">&#9670;&nbsp;</a></span>cylvar_n_approx</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cylvar_n_approx</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cylind__var_8c_source.html#l00670">670</a> of file <a class="el" href="cylind__var_8c_source.html">cylind_var.c</a>.</p>

</div>
</div>
<a id="a5785a52970e5d224302940b772cb9e60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5785a52970e5d224302940b772cb9e60">&#9670;&nbsp;</a></span>ierr_cylvar_where_in_grid</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ierr_cylvar_where_in_grid = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cylind__var_8c_source.html#l00671">671</a> of file <a class="el" href="cylind__var_8c_source.html">cylind_var.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_b2f33c71d4aa5e7af42a1ca61ff5af1b.html">source</a></li><li class="navelem"><a class="el" href="cylind__var_8c.html">cylind_var.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
